<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mouza Map Search</title>
  <style>
    body { font-family: system-ui,-apple-system,BlinkMacSystemFont,sans-serif; background:#f5f7fa; margin:0; padding:0; }
    .container { max-width: 700px; margin: 40px auto; background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
    h2 { margin-top:0; }
    label { display: block; margin-top: 16px; font-weight: 600; }
    select, input { width: 100%; padding: 10px 12px; margin-top: 6px; border:1px solid #cbd5e1; border-radius:8px; font-size:14px; box-sizing:border-box; }
    button { padding: 12px 18px; border:none; border-radius:8px; font-size:16px; font-weight:600; transition:background .2s; cursor:pointer; }
    #searchBtn { margin-top: 20px; background:#2563eb; color:#fff; }
    #searchBtn:disabled { background: #94a3b8; cursor: not-allowed; }
    #downloadBtn {
      margin-top: 12px;
      background: #16a34a;
      color: #fff;
    }
    #downloadBtn:hover {
      background: #15803d;
    }
    #payBtn {
      margin-top: 12px;
      background: #f59e0b;
      color: #fff;
    }
    iframe { width:100%; height:500px; border:1px solid #e2e8f0; border-radius:8px; margin-top:16px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="container">
    <h2>‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö (‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó)</h2>

    <label for="division">‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó</label>
    <select id="division" required disabled>
      <option value="chattogram" selected>‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
    </select>

    <label for="district">‡¶ú‡ßá‡¶≤‡¶æ</label>
    <select id="district" required disabled>
      <option value="chittagong" selected>‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
    </select>

    <label for="upazila">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ</label>
    <select id="upazila" required>
      <option value="">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
    </select>

    <label for="mouza">‡¶Æ‡ßå‡¶ú‡¶æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
    <select id="mouza">
      <option value="">‡¶Æ‡ßå‡¶ú‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</option>
    </select>

    <label for="jl">‡¶ú‡ßá‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (J.L. Number)</label>
    <input type="text" id="jl" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: 135" />

    <button id="searchBtn" onclick="searchMap()">‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>

    <iframe id="pdfViewer" class="hidden"></iframe>

    <!-- Download Button -->
    <button id="downloadBtn" class="hidden" onclick="downloadPDF()">‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°</button>

    <!-- Payment Button -->
    <button id="payBtn" class="hidden" onclick="startPayment()">üí≥ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  </div>

  <script>
    let isPaid = false; // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá

    // ‡¶°‡ßá‡¶ü‡¶æ: ‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ú‡ßá‡¶≤‡¶æ‡¶∞ ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶ì ‡¶Æ‡ßå‡¶ú‡¶æ (key = ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø, value = ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶æ‡¶Æ)
    const mouzaData = {
      "sitakunda": ["‡¶Ü‡¶Æ‡¶¨‡¶æ‡ßú‡¶ø", "‡¶ï‡¶≤‡¶æ‡¶§‡¶≤‡ßÄ", "‡¶Æ‡¶ø‡¶∞‡¶∏‡¶∞‡¶æ‡¶á"],
      "anwara": ["‡¶ï‡¶æ‡¶≤‡¶æ‡¶¨‡¶æ‡¶ó‡¶æ‡¶®", "‡¶ö‡¶æ‡¶Å‡¶¶‡¶ó‡¶æ‡¶Å‡¶ì", "‡¶Ü‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ"],
      "panchlaish": ["‡¶™‡¶æ‡¶Å‡¶ö‡¶≤‡¶æ‡¶á‡¶∂", "‡¶¨‡¶∏‡ßÅ‡¶∞‡¶π‡¶æ‡¶ü"]
      // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶ì ‡¶Æ‡ßå‡¶ú‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡¶∞‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶¨‡ßá‡¶®
    };

    // ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶æ‡¶Æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ (key ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø)
    const upazilaNames = {
      "sitakunda": "‡¶∏‡ßÄ‡¶§‡¶æ‡¶ï‡ßÅ‡¶£‡ßç‡¶°",
      "anwara": "‡¶Ü‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ",
      "panchlaish": "‡¶™‡¶æ‡¶Å‡¶ö‡¶≤‡¶æ‡¶á‡¶∂"
    };

    const upazilaSelect = document.getElementById("upazila");
    const mouzaSelect = document.getElementById("mouza");
    const pdfViewer = document.getElementById("pdfViewer");
    const downloadBtn = document.getElementById("downloadBtn");
    const payBtn = document.getElementById("payBtn");

    // ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    function loadUpazilas() {
      upazilaSelect.innerHTML = '<option value="">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>';
      mouzaSelect.innerHTML = '<option value="">‡¶Æ‡ßå‡¶ú‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</option>';
      pdfViewer.classList.add('hidden');
      downloadBtn.classList.add('hidden');
      payBtn.classList.add('hidden');

      for (const key in mouzaData) {
        const option = document.createElement("option");
        option.value = key;
        option.textContent = upazilaNames[key] || key;
        upazilaSelect.appendChild(option);
      }
    }

    // ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶≤‡ßá ‡¶Æ‡ßå‡¶ú‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    upazilaSelect.addEventListener('change', () => {
      const upazila = upazilaSelect.value;
      mouzaSelect.innerHTML = '<option value="">‡¶Æ‡ßå‡¶ú‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</option>';
      pdfViewer.classList.add('hidden');
      downloadBtn.classList.add('hidden');
      payBtn.classList.add('hidden');

      if (upazila && mouzaData[upazila]) {
        mouzaData[upazila].forEach(mouza => {
          const option = document.createElement("option");
          option.value = mouza;
          option.textContent = mouza;
          mouzaSelect.appendChild(option);
        });
      }
    });

    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá
    async function searchMap() {
      const division = document.getElementById('division').value.trim();
      const district = document.getElementById('district').value.trim();
      const upazila = upazilaSelect.value.trim();
      const mouza = mouzaSelect.value.trim();
      const jl = document.getElementById('jl').value.trim();

      if (!division || !district || !upazila || (mouza === "" && jl === "")) {
        alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó, ‡¶ú‡ßá‡¶≤‡¶æ, ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡¶Æ‡ßå‡¶ú‡¶æ ‡¶¨‡¶æ JL ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®‡•§');
        return;
      }

      const filename = jl !== "" ? jl + ".pdf" : mouza + ".pdf";
      const pdfPath = `pdfs/${division}/${district}/${upazila}/${filename}`;

      try {
        const res = await fetch(pdfPath, { method: 'HEAD' });
        if (res.ok) {
          pdfViewer.src = pdfPath;
          pdfViewer.classList.remove('hidden');
          downloadBtn.classList.remove('hidden');
          downloadBtn.setAttribute('data-url', pdfPath);
          payBtn.classList.add('hidden');
        } else {
          pdfViewer.classList.add('hidden');
          downloadBtn.classList.add('hidden');
          payBtn.classList.add('hidden');
          alert('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§');
        }
      } catch (err) {
        pdfViewer.classList.add('hidden');
        downloadBtn.classList.add('hidden');
        payBtn.classList.add('hidden');
        alert('‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§');
      }
    }

    // ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßá‡¶ï
    function downloadPDF() {
      if (!isPaid) {
        payBtn.classList.remove('hidden');
        alert('‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶Ü‡¶ó‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        return;
      }

      const url = downloadBtn.getAttribute('data-url');
      if (url) {
        const link = document.createElement('a');
        link.href = url;
        link.download = url.split('/').pop();
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }
    }

    // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶°‡ßá‡¶Æ‡ßã)
    function startPayment() {
      alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá‡•§ (‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶ ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶Ü‡¶∏‡¶¨‡ßá)');
      isPaid = true;
      payBtn.classList.add('hidden');
      alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® ‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
    }

    window.onload = loadUpazilas;
  </script>
</body>
</html>